2025-03-03 01:12:11.929 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 01:12:12.995 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 01:12:12.998 +04:00 [INF] Hosting environment: Development
2025-03-03 01:12:13.000 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 01:12:28.064 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger - -
2025-03-03 01:12:31.779 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 01:12:31.853 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger - - - 301 0 - 3685.2827ms
2025-03-03 01:12:32.109 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 330.1278ms
2025-03-03 01:12:32.362 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/swagger-ui.css - -
2025-03-03 01:12:32.363 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/swagger-ui-bundle.js - -
2025-03-03 01:12:32.365 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/swagger-ui-standalone-preset.js - -
2025-03-03 01:12:32.365 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 01:12:32.372 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 7.4987ms
2025-03-03 01:12:32.631 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 01:12:32.682 +04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-03-03 01:12:32.689 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/swagger-ui.css - - - 200 144929 text/css 326.6540ms
2025-03-03 01:12:32.712 +04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-03-03 01:12:32.715 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/swagger-ui-standalone-preset.js - - - 200 312163 application/javascript 350.5624ms
2025-03-03 01:12:32.875 +04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-03-03 01:12:32.880 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/swagger-ui-bundle.js - - - 200 1061536 application/javascript 517.5005ms
2025-03-03 01:12:33.569 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 937.0052ms
2025-03-03 01:12:33.666 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 01:12:34.991 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 1324.3647ms
2025-03-03 01:12:47.841 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/City - -
2025-03-03 01:12:48.008 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.GetCities (Bank.Api)'
2025-03-03 01:12:48.210 +04:00 [INF] Route matched with {action = "GetCities", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.City]] GetCities() on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:12:53.813 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:12:53.817 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:12:53.821 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:12:53.825 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:12:53.829 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:12:53.833 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:12:54.248 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.City, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 01:13:04.130 +04:00 [INF] Executed DbCommand (946ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
2025-03-03 01:13:04.924 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.GetCities (Bank.Api) in 16700.1825ms
2025-03-03 01:13:04.929 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.GetCities (Bank.Api)'
2025-03-03 01:13:04.948 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/City - - - 200 - application/json;+charset=utf-8 17107.6910ms
2025-03-03 01:13:53.623 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 24
2025-03-03 01:13:53.634 +04:00 [INF] CORS policy execution successful.
2025-03-03 01:13:53.731 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api)'
2025-03-03 01:13:53.808 +04:00 [INF] Route matched with {action = "UpdateAccount", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task UpdateAccount(Bank.Model.CityModel) on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:13:55.532 +04:00 [INF] Executed DbCommand (663ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-03 01:13:55.784 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api) in 1962.0254ms
2025-03-03 01:13:55.807 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api)'
2025-03-03 01:13:55.826 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The property 'City.Id' has a temporary value while attempting to change the entity's state to 'Modified'. Either set a permanent value explicitly, or ensure that the database is configured to generate values for this property.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.set_State(EntityState value)
   at Bank.Repository.RepositoryBase`1.Update(T entity) in D:\AllProgramming\Bank\Bank.Repository\RepositoryBase.cs:line 57
   at Bank.Service.CityService.UpdateCity(City city) in D:\AllProgramming\Bank\Bank.Service\CityService.cs:line 36
   at Bank.Api.Controllers.CityController.UpdateAccount(CityModel model) in D:\AllProgramming\Bank\Bank.Api\Controllers\CityController.cs:line 61
   at lambda_method54(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-03-03 01:13:56.396 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 24 - 500 - text/plain;+charset=utf-8 2773.4926ms
2025-03-03 01:17:01.866 +04:00 [INF] Application is shutting down...
2025-03-03 01:17:26.832 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 01:17:27.003 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 01:17:27.217 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 01:17:27.235 +04:00 [INF] Hosting environment: Development
2025-03-03 01:17:27.239 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 01:17:27.391 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 395.1644ms
2025-03-03 01:17:27.450 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 01:17:27.459 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 01:17:27.460 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 10.5514ms
2025-03-03 01:17:27.534 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 75.6383ms
2025-03-03 01:17:27.943 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 01:17:28.065 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/favicon-32x32.png - -
2025-03-03 01:17:28.084 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-03-03 01:17:28.087 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/favicon-32x32.png - - - 200 628 image/png 21.6165ms
2025-03-03 01:17:28.297 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 353.4041ms
2025-03-03 01:19:07.224 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 24
2025-03-03 01:19:07.234 +04:00 [INF] CORS policy execution successful.
2025-03-03 01:19:07.271 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api)'
2025-03-03 01:19:07.326 +04:00 [INF] Route matched with {action = "UpdateAccount", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task UpdateAccount(Bank.Model.CityModel) on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:19:08.828 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:19:08.832 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:19:08.835 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:19:08.842 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:19:08.847 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:19:08.859 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:19:10.467 +04:00 [INF] Executed DbCommand (270ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-03 01:19:10.858 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api) in 3521.5209ms
2025-03-03 01:19:10.863 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api)'
2025-03-03 01:19:10.865 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The property 'City.Id' has a temporary value while attempting to change the entity's state to 'Modified'. Either set a permanent value explicitly, or ensure that the database is configured to generate values for this property.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey, Nullable`1 fallbackState)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.set_State(EntityState value)
   at Bank.Repository.RepositoryBase`1.Update(T entity) in D:\AllProgramming\Bank\Bank.Repository\RepositoryBase.cs:line 57
   at Bank.Service.CityService.UpdateCity(City city) in D:\AllProgramming\Bank\Bank.Service\CityService.cs:line 36
   at Bank.Api.Controllers.CityController.UpdateAccount(CityModel model) in D:\AllProgramming\Bank\Bank.Api\Controllers\CityController.cs:line 61
   at lambda_method9(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-03-03 01:19:10.950 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 24 - 500 - text/plain;+charset=utf-8 3725.3251ms
2025-03-03 01:25:55.429 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 01:25:55.694 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 01:25:55.831 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 01:25:55.833 +04:00 [INF] Hosting environment: Development
2025-03-03 01:25:55.835 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 01:25:56.087 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 404.9376ms
2025-03-03 01:25:56.180 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 01:25:56.186 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 6.0053ms
2025-03-03 01:25:56.187 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 01:25:56.245 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.3678ms
2025-03-03 01:25:56.688 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 01:25:56.928 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 239.8709ms
2025-03-03 01:26:33.521 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 20
2025-03-03 01:26:33.533 +04:00 [INF] CORS policy execution successful.
2025-03-03 01:26:33.587 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api)'
2025-03-03 01:26:33.662 +04:00 [INF] Route matched with {action = "UpdateAccount", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task UpdateAccount(Bank.Model.CityModel) on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:26:35.558 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:26:35.561 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:26:35.565 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:26:35.572 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:26:35.577 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:26:35.587 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:26:37.528 +04:00 [INF] Executed DbCommand (123ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-03 01:26:37.639 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api) in 3948.6431ms
2025-03-03 01:26:37.644 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.UpdateAccount (Bank.Api)'
2025-03-03 01:26:37.649 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Entity not found in the database.
   at Bank.Repository.RepositoryBase`1.Update(T entity) in D:\AllProgramming\Bank\Bank.Repository\RepositoryBase.cs:line 53
   at Bank.Service.CityService.UpdateCity(City city) in D:\AllProgramming\Bank\Bank.Service\CityService.cs:line 36
   at Bank.Api.Controllers.CityController.UpdateAccount(CityModel model) in D:\AllProgramming\Bank\Bank.Api\Controllers\CityController.cs:line 60
   at lambda_method9(Closure , Object , Object[] )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-03-03 01:26:37.843 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 20 - 500 - text/plain;+charset=utf-8 4321.9995ms
2025-03-03 01:43:04.535 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 01:43:04.782 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 01:43:04.785 +04:00 [INF] Hosting environment: Development
2025-03-03 01:43:04.787 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 01:43:05.078 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 01:43:05.362 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 289.9026ms
2025-03-03 01:43:05.429 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 01:43:05.436 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 01:43:05.439 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 9.4350ms
2025-03-03 01:43:05.507 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 71.4571ms
2025-03-03 01:43:05.634 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 01:43:05.891 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 256.9609ms
2025-03-03 01:43:43.123 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 01:43:43.429 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 01:43:43.435 +04:00 [INF] Hosting environment: Development
2025-03-03 01:43:43.442 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 01:43:43.652 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 01:43:43.959 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 311.1395ms
2025-03-03 01:43:44.028 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 01:43:44.032 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 01:43:44.034 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 6.4569ms
2025-03-03 01:43:44.106 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 74.0209ms
2025-03-03 01:43:44.237 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 01:43:44.582 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 344.2301ms
2025-03-03 01:44:08.100 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 22
2025-03-03 01:44:08.111 +04:00 [INF] CORS policy execution successful.
2025-03-03 01:44:08.165 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.UpdateCity (Bank.Api)'
2025-03-03 01:44:08.300 +04:00 [INF] Route matched with {action = "UpdateCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCity(Int32, Bank.Model.CityModel) on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:44:10.601 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:44:10.608 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:44:10.611 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:44:10.615 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:44:10.627 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:44:10.632 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 01:44:12.499 +04:00 [INF] Executed DbCommand (173ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-03 01:44:13.243 +04:00 [INF] Executed DbCommand (245ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cities] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-03 01:44:13.285 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 01:44:13.298 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.UpdateCity (Bank.Api) in 4978.8189ms
2025-03-03 01:44:13.305 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.UpdateCity (Bank.Api)'
2025-03-03 01:44:13.323 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 22 - 204 - - 5222.4632ms
2025-03-03 01:44:25.312 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/City/1 - -
2025-03-03 01:44:25.318 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.GetCityAsync (Bank.Api)'
2025-03-03 01:44:25.328 +04:00 [INF] Route matched with {action = "GetCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Bank.DTO.City] GetCityAsync(Int32) on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:44:25.574 +04:00 [INF] Executed DbCommand (57ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-03 01:44:25.653 +04:00 [INF] Executing ObjectResult, writing value of type 'Bank.DTO.City'.
2025-03-03 01:44:25.824 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.GetCityAsync (Bank.Api) in 490.8204ms
2025-03-03 01:44:25.833 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.GetCityAsync (Bank.Api)'
2025-03-03 01:44:25.842 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/City/1 - - - 200 - application/json;+charset=utf-8 529.0026ms
2025-03-03 01:45:32.810 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/City - -
2025-03-03 01:45:32.857 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.GetCities (Bank.Api)'
2025-03-03 01:45:32.866 +04:00 [INF] Route matched with {action = "GetCities", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.City]] GetCities() on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:45:32.907 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.City, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 01:45:32.979 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
2025-03-03 01:45:32.995 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.GetCities (Bank.Api) in 121.8981ms
2025-03-03 01:45:33.000 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.GetCities (Bank.Api)'
2025-03-03 01:45:33.004 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/City - - - 200 - application/json;+charset=utf-8 193.2319ms
2025-03-03 01:46:06.878 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 23
2025-03-03 01:46:06.884 +04:00 [INF] CORS policy execution successful.
2025-03-03 01:46:06.886 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.UpdateCity (Bank.Api)'
2025-03-03 01:46:06.891 +04:00 [INF] Route matched with {action = "UpdateCity", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCity(Int32, Bank.Model.CityModel) on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:46:06.982 +04:00 [INF] Executed DbCommand (68ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
WHERE [c].[Id] = @__p_0
2025-03-03 01:46:07.045 +04:00 [INF] Executed DbCommand (53ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Cities] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-03 01:46:07.053 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 01:46:07.055 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.UpdateCity (Bank.Api) in 153.1519ms
2025-03-03 01:46:07.058 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.UpdateCity (Bank.Api)'
2025-03-03 01:46:07.061 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/api/City/1 application/json 23 - 204 - - 183.2135ms
2025-03-03 01:46:13.635 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/City - -
2025-03-03 01:46:13.639 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CityController.GetCities (Bank.Api)'
2025-03-03 01:46:13.641 +04:00 [INF] Route matched with {action = "GetCities", controller = "City"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.City]] GetCities() on controller Bank.Api.Controllers.CityController (Bank.Api).
2025-03-03 01:46:13.652 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.City, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 01:46:13.661 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreateDate], [c].[IsDelete], [c].[Name]
FROM [Cities] AS [c]
2025-03-03 01:46:13.671 +04:00 [INF] Executed action Bank.Api.Controllers.CityController.GetCities (Bank.Api) in 25.2131ms
2025-03-03 01:46:13.675 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CityController.GetCities (Bank.Api)'
2025-03-03 01:46:13.684 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/City - - - 200 - application/json;+charset=utf-8 48.7727ms
2025-03-03 02:14:40.427 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 02:14:40.669 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 02:14:40.673 +04:00 [INF] Hosting environment: Development
2025-03-03 02:14:40.674 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 02:14:40.806 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 02:14:41.084 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 281.5115ms
2025-03-03 02:14:41.237 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 02:14:41.242 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 5.0454ms
2025-03-03 02:14:41.264 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 02:14:41.341 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.4476ms
2025-03-03 02:14:41.589 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 02:14:41.950 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 360.3878ms
2025-03-03 02:15:19.039 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/User - -
2025-03-03 02:15:19.107 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:15:19.153 +04:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.User]] GetUsers() on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:15:20.436 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:15:20.440 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:15:20.441 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:15:20.444 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:15:20.456 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:15:20.461 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:15:20.727 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.User, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:15:22.121 +04:00 [INF] Executed DbCommand (298ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
2025-03-03 02:15:22.346 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.GetUsers (Bank.Api) in 3183.1526ms
2025-03-03 02:15:22.352 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:15:22.367 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/User - - - 200 - application/json;+charset=utf-8 3328.7581ms
2025-03-03 02:17:27.157 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 2411
2025-03-03 02:17:27.172 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:17:27.180 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:17:27.202 +04:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, Bank.DTO.User) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:17:27.422 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-03-03 02:17:27.433 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.UpdateUser (Bank.Api) in 221.4532ms
2025-03-03 02:17:27.435 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:17:27.439 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 2411 - 400 - application/problem+json;+charset=utf-8 282.1075ms
2025-03-03 02:28:47.008 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Customer - -
2025-03-03 02:28:47.011 +04:00 [INF] Executing endpoint 'CustomerController.GetCustomers (Bank.Api)'
2025-03-03 02:28:47.054 +04:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Customer]] GetCustomers() on controller CustomerController (Bank.Api).
2025-03-03 02:28:47.148 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Customer, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:28:47.532 +04:00 [INF] Executed DbCommand (282ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CityId], [c].[CreateDate], [c].[FirstName], [c].[Gender], [c].[IsDelete], [c].[LastName], [c].[PersonalNumber], [c].[Phone1], [c].[Phone2], [c].[UserId]
FROM [Customers] AS [c]
2025-03-03 02:28:47.631 +04:00 [INF] Executed action CustomerController.GetCustomers (Bank.Api) in 569.3945ms
2025-03-03 02:28:47.635 +04:00 [INF] Executed endpoint 'CustomerController.GetCustomers (Bank.Api)'
2025-03-03 02:28:47.640 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Customer - - - 200 - application/json;+charset=utf-8 632.3197ms
2025-03-03 02:33:13.339 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 02:33:13.595 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 02:33:13.790 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 02:33:13.798 +04:00 [INF] Hosting environment: Development
2025-03-03 02:33:13.803 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 02:33:14.015 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 435.1559ms
2025-03-03 02:33:14.094 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 02:33:14.101 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 02:33:14.106 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 12.3649ms
2025-03-03 02:33:14.169 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.6782ms
2025-03-03 02:33:14.538 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 02:33:14.782 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 243.5490ms
2025-03-03 02:39:54.232 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 02:39:54.654 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 02:39:54.755 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 02:39:54.766 +04:00 [INF] Hosting environment: Development
2025-03-03 02:39:54.774 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 02:39:55.138 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 493.3074ms
2025-03-03 02:39:55.211 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 02:39:55.219 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 02:39:55.222 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 10.9503ms
2025-03-03 02:39:55.314 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 95.0985ms
2025-03-03 02:39:55.824 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 02:39:56.491 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 667.1731ms
2025-03-03 02:42:56.810 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 02:42:57.252 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 02:42:57.564 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 02:42:57.568 +04:00 [INF] Hosting environment: Development
2025-03-03 02:42:57.571 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 02:42:57.870 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 629.0954ms
2025-03-03 02:42:57.926 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 02:42:57.929 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 02:42:57.934 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 7.8903ms
2025-03-03 02:42:58.030 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 100.9186ms
2025-03-03 02:42:58.161 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 02:42:58.462 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 302.6678ms
2025-03-03 02:43:42.261 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/User application/json 78
2025-03-03 02:43:42.277 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:43:42.355 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.RegisterUserAsync (Bank.Api)'
2025-03-03 02:43:42.480 +04:00 [INF] Route matched with {action = "RegisterUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterUserAsync(Bank.Model.UserModel) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:43:44.837 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:43:44.843 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:43:44.846 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:43:44.858 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:43:44.871 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:43:44.879 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:43:47.432 +04:00 [INF] Executed DbCommand (789ms) [Parameters=[@p0='?' (Size = 128), @p1='?' (Scale = 7) (DbType = DateTime2), @p2='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Password], [RegistrationDate], [UserName])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2);
2025-03-03 02:43:47.675 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 02:43:47.706 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.RegisterUserAsync (Bank.Api) in 5202.4554ms
2025-03-03 02:43:47.715 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.RegisterUserAsync (Bank.Api)'
2025-03-03 02:43:47.751 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/User application/json 78 - 204 - - 5489.7862ms
2025-03-03 02:44:34.600 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Customer application/json 163
2025-03-03 02:44:34.603 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:44:34.606 +04:00 [INF] Executing endpoint 'CustomerController.CreateCustomerAsync (Bank.Api)'
2025-03-03 02:44:34.621 +04:00 [INF] Route matched with {action = "CreateCustomer", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCustomerAsync(Bank.Model.CustomerModel) on controller CustomerController (Bank.Api).
2025-03-03 02:44:35.185 +04:00 [INF] Executed DbCommand (241ms) [Parameters=[@p0='?' (Size = 75), @p1='?' (DbType = Int32), @p2='?' (Size = 25), @p3='?' (Size = 10), @p4='?' (Size = 25), @p5='?' (Size = 9), @p6='?' (Size = 15), @p7='?' (Size = 15), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Customers] ([Address], [CityId], [FirstName], [Gender], [LastName], [PersonalNumber], [Phone1], [Phone2], [UserId])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-03-03 02:44:35.217 +04:00 [INF] Executing OkObjectResult, writing value of type 'Bank.DTO.Customer'.
2025-03-03 02:44:35.281 +04:00 [INF] Executed action CustomerController.CreateCustomerAsync (Bank.Api) in 655.0642ms
2025-03-03 02:44:35.287 +04:00 [INF] Executed endpoint 'CustomerController.CreateCustomerAsync (Bank.Api)'
2025-03-03 02:44:35.292 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Customer application/json 163 - 200 - application/json;+charset=utf-8 692.3436ms
2025-03-03 02:52:09.931 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 02:52:10.360 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 02:52:10.364 +04:00 [INF] Hosting environment: Development
2025-03-03 02:52:10.366 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 02:52:11.941 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 02:52:12.503 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 572.8388ms
2025-03-03 02:52:12.577 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 02:52:12.580 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 3.3347ms
2025-03-03 02:52:12.617 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 02:52:12.762 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 145.0384ms
2025-03-03 02:52:12.867 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 02:52:13.224 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 356.4475ms
2025-03-03 02:53:03.430 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 59
2025-03-03 02:53:03.445 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:53:03.500 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:53:03.579 +04:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, Bank.Model.UserModel) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:53:05.495 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:53:05.498 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:53:05.501 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:53:05.505 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:53:05.509 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:53:05.514 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 02:53:07.629 +04:00 [INF] Executed DbCommand (333ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:53:08.288 +04:00 [INF] Executed DbCommand (237ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UserName] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-03 02:53:08.370 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 02:53:08.386 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.UpdateUser (Bank.Api) in 4792.1965ms
2025-03-03 02:53:08.393 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:53:08.415 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 59 - 204 - - 4984.8639ms
2025-03-03 02:53:14.394 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/User - -
2025-03-03 02:53:14.397 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:53:14.407 +04:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.User]] GetUsers() on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:53:14.548 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.User, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:53:14.615 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
2025-03-03 02:53:14.637 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.GetUsers (Bank.Api) in 204.2811ms
2025-03-03 02:53:14.640 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:53:14.644 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/User - - - 200 - application/json;+charset=utf-8 249.9280ms
2025-03-03 02:53:37.880 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 48
2025-03-03 02:53:37.907 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:53:37.915 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:53:37.918 +04:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, Bank.Model.UserModel) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:53:38.031 +04:00 [INF] Executed DbCommand (72ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:53:38.064 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UserName] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-03 02:53:38.082 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 02:53:38.087 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.UpdateUser (Bank.Api) in 163.2709ms
2025-03-03 02:53:38.099 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:53:38.109 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 48 - 204 - - 228.7905ms
2025-03-03 02:53:44.089 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/User - -
2025-03-03 02:53:44.091 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:53:44.093 +04:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.User]] GetUsers() on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:53:44.098 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.User, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:53:44.130 +04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
2025-03-03 02:53:44.143 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.GetUsers (Bank.Api) in 46.1185ms
2025-03-03 02:53:44.147 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:53:44.149 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/User - - - 200 - application/json;+charset=utf-8 60.2373ms
2025-03-03 02:54:04.874 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 59
2025-03-03 02:54:04.876 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:54:04.878 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:54:04.880 +04:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, Bank.Model.UserModel) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:54:04.889 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:54:04.897 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 30)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [UserName] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-03 02:54:04.901 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 02:54:04.903 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.UpdateUser (Bank.Api) in 18.9156ms
2025-03-03 02:54:04.907 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:54:04.909 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 59 - 204 - - 35.7402ms
2025-03-03 02:54:10.794 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/User - -
2025-03-03 02:54:10.795 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:54:10.797 +04:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.User]] GetUsers() on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:54:10.802 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.User, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:54:10.810 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
2025-03-03 02:54:10.815 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.GetUsers (Bank.Api) in 13.3916ms
2025-03-03 02:54:10.819 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:54:10.823 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/User - - - 200 - application/json;+charset=utf-8 29.1827ms
2025-03-03 02:54:19.272 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 59
2025-03-03 02:54:19.274 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:54:19.276 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:54:19.278 +04:00 [INF] Route matched with {action = "UpdateUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(Int32, Bank.Model.UserModel) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:54:19.285 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:54:19.292 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 02:54:19.294 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.UpdateUser (Bank.Api) in 12.09ms
2025-03-03 02:54:19.297 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.UpdateUser (Bank.Api)'
2025-03-03 02:54:19.300 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/update application/json 59 - 204 - - 27.9660ms
2025-03-03 02:54:31.491 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/User - -
2025-03-03 02:54:31.493 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:54:31.495 +04:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.User]] GetUsers() on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:54:31.500 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.User, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:54:31.531 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
2025-03-03 02:54:31.543 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.GetUsers (Bank.Api) in 43.331ms
2025-03-03 02:54:31.545 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:54:31.547 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/User - - - 200 - application/json;+charset=utf-8 55.7268ms
2025-03-03 02:55:50.767 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/reset?newPassword=KiviliIsME application/json 54
2025-03-03 02:55:50.769 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:55:50.771 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.ResetPassword (Bank.Api)'
2025-03-03 02:55:50.781 +04:00 [INF] Route matched with {action = "ResetPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(Int32, Bank.Model.UserModel, System.String) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:55:50.959 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:55:51.307 +04:00 [INF] Executed DbCommand (287ms) [Parameters=[@__userName_0='?' (Size = 30), @__oldPassword_1='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__userName_0 AND [u].[Password] = @__oldPassword_1
2025-03-03 02:55:51.315 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.ResetPassword (Bank.Api) in 528.3997ms
2025-03-03 02:55:51.322 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.ResetPassword (Bank.Api)'
2025-03-03 02:55:51.326 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.InvalidDataException: User not found
   at Bank.Service.UserService.ResetPassword(String userName, String oldPassword, String newPassword) in D:\AllProgramming\Bank\Bank.Service\UserService.cs:line 86
   at Bank.Api.Controllers.UserController.ResetPassword(Int32 id, UserModel model, String newPassword) in D:\AllProgramming\Bank\Bank.Api\Controllers\UserController.cs:line 79
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-03-03 02:55:52.032 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/reset?newPassword=KiviliIsME application/json 54 - 500 - text/plain;+charset=utf-8 1264.8736ms
2025-03-03 02:56:07.993 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/reset?newPassword=KiviliIsME application/json 63
2025-03-03 02:56:07.998 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:56:08.000 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.ResetPassword (Bank.Api)'
2025-03-03 02:56:08.003 +04:00 [INF] Route matched with {action = "ResetPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(Int32, Bank.Model.UserModel, System.String) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:56:08.013 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:56:08.021 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userName_0='?' (Size = 30), @__oldPassword_1='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__userName_0 AND [u].[Password] = @__oldPassword_1
2025-03-03 02:56:08.027 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.ResetPassword (Bank.Api) in 19.65ms
2025-03-03 02:56:08.030 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.ResetPassword (Bank.Api)'
2025-03-03 02:56:08.034 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.InvalidDataException: User not found
   at Bank.Service.UserService.ResetPassword(String userName, String oldPassword, String newPassword) in D:\AllProgramming\Bank\Bank.Service\UserService.cs:line 86
   at Bank.Api.Controllers.UserController.ResetPassword(Int32 id, UserModel model, String newPassword) in D:\AllProgramming\Bank\Bank.Api\Controllers\UserController.cs:line 79
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2025-03-03 02:56:08.053 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/reset?newPassword=KiviliIsME application/json 63 - 500 - text/plain;+charset=utf-8 59.6172ms
2025-03-03 02:56:24.802 +04:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5000/User/1/reset?newPassword=KiviliIsME application/json 64
2025-03-03 02:56:24.804 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:56:24.806 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.ResetPassword (Bank.Api)'
2025-03-03 02:56:24.808 +04:00 [INF] Route matched with {action = "ResetPassword", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ResetPassword(Int32, Bank.Model.UserModel, System.String) on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:56:24.816 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-03-03 02:56:24.824 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userName_0='?' (Size = 30), @__oldPassword_1='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[UserName] = @__userName_0 AND [u].[Password] = @__oldPassword_1
2025-03-03 02:56:24.876 +04:00 [INF] Executed DbCommand (45ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 128)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Password] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-03-03 02:56:24.881 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-03-03 02:56:24.884 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.ResetPassword (Bank.Api) in 71.5871ms
2025-03-03 02:56:24.886 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.ResetPassword (Bank.Api)'
2025-03-03 02:56:24.888 +04:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5000/User/1/reset?newPassword=KiviliIsME application/json 64 - 204 - - 86.1045ms
2025-03-03 02:56:32.677 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/User - -
2025-03-03 02:56:32.679 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:56:32.681 +04:00 [INF] Route matched with {action = "GetUsers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.User]] GetUsers() on controller Bank.Api.Controllers.UserController (Bank.Api).
2025-03-03 02:56:32.686 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.User, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:56:32.692 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreateDate], [u].[IsDelete], [u].[Password], [u].[RegistrationDate], [u].[UserName]
FROM [Users] AS [u]
2025-03-03 02:56:32.700 +04:00 [INF] Executed action Bank.Api.Controllers.UserController.GetUsers (Bank.Api) in 15.559ms
2025-03-03 02:56:32.705 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.UserController.GetUsers (Bank.Api)'
2025-03-03 02:56:32.707 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/User - - - 200 - application/json;+charset=utf-8 29.0930ms
2025-03-03 02:58:47.495 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Account - -
2025-03-03 02:58:47.497 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 02:58:47.504 +04:00 [INF] Route matched with {action = "GetAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Account]] GetAccounts() on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 02:58:47.512 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Account, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 02:58:47.918 +04:00 [INF] Executed DbCommand (391ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
2025-03-03 02:58:47.937 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api) in 428.7842ms
2025-03-03 02:58:47.953 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 02:58:47.964 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Account - - - 200 - application/json;+charset=utf-8 469.1743ms
2025-03-03 02:59:23.842 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Account application/json 96
2025-03-03 02:59:23.845 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:59:23.849 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.CreateAccountAsync (Bank.Api)'
2025-03-03 02:59:23.861 +04:00 [INF] Route matched with {action = "CreateAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAccountAsync(Bank.Model.AccountModel) on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 02:59:24.568 +04:00 [INF] Executed DbCommand (397ms) [Parameters=[@p0='?' (DbType = Currency), @p1='?' (DbType = Int32), @p2='?' (Size = 34), @p3='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Balance], [CustomerId], [IBAN], [Status])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2, @p3);
2025-03-03 02:59:24.683 +04:00 [INF] Executing OkObjectResult, writing value of type 'Bank.DTO.Account'.
2025-03-03 02:59:24.701 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.CreateAccountAsync (Bank.Api) in 836.4121ms
2025-03-03 02:59:24.708 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.CreateAccountAsync (Bank.Api)'
2025-03-03 02:59:24.715 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Account application/json 96 - 200 - application/json;+charset=utf-8 872.8209ms
2025-03-03 02:59:56.857 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Account application/json 96
2025-03-03 02:59:56.859 +04:00 [INF] CORS policy execution successful.
2025-03-03 02:59:56.879 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.CreateAccountAsync (Bank.Api)'
2025-03-03 02:59:56.888 +04:00 [INF] Route matched with {action = "CreateAccount", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateAccountAsync(Bank.Model.AccountModel) on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 02:59:56.906 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Currency), @p1='?' (DbType = Int32), @p2='?' (Size = 34), @p3='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Accounts] ([Balance], [CustomerId], [IBAN], [Status])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2, @p3);
2025-03-03 02:59:56.911 +04:00 [INF] Executing OkObjectResult, writing value of type 'Bank.DTO.Account'.
2025-03-03 02:59:56.914 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.CreateAccountAsync (Bank.Api) in 15.6221ms
2025-03-03 02:59:56.917 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.CreateAccountAsync (Bank.Api)'
2025-03-03 02:59:56.919 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Account application/json 96 - 200 - application/json;+charset=utf-8 61.9109ms
2025-03-03 03:00:14.026 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Customer - -
2025-03-03 03:00:14.028 +04:00 [INF] Executing endpoint 'CustomerController.GetCustomers (Bank.Api)'
2025-03-03 03:00:14.034 +04:00 [INF] Route matched with {action = "GetCustomers", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Customer]] GetCustomers() on controller CustomerController (Bank.Api).
2025-03-03 03:00:14.043 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Customer, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 03:00:14.425 +04:00 [INF] Executed DbCommand (369ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[CityId], [c].[CreateDate], [c].[FirstName], [c].[Gender], [c].[IsDelete], [c].[LastName], [c].[PersonalNumber], [c].[Phone1], [c].[Phone2], [c].[UserId]
FROM [Customers] AS [c]
2025-03-03 03:00:14.523 +04:00 [INF] Executed action CustomerController.GetCustomers (Bank.Api) in 483.4788ms
2025-03-03 03:00:14.526 +04:00 [INF] Executed endpoint 'CustomerController.GetCustomers (Bank.Api)'
2025-03-03 03:00:14.529 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Customer - - - 200 - application/json;+charset=utf-8 503.2100ms
2025-03-03 03:00:35.720 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Card - -
2025-03-03 03:00:35.721 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CardController.GetCards (Bank.Api)'
2025-03-03 03:00:35.732 +04:00 [INF] Route matched with {action = "GetCards", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Card]] GetCards() on controller Bank.Api.Controllers.CardController (Bank.Api).
2025-03-03 03:00:35.743 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Card, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 03:00:36.016 +04:00 [INF] Executed DbCommand (260ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AccountId], [c].[CreateDate], [c].[Cvc], [c].[ExpirationDate], [c].[IsDelete], [c].[Number], [c].[Owner], [c].[Type]
FROM [CreditCards] AS [c]
2025-03-03 03:00:36.033 +04:00 [INF] Executed action Bank.Api.Controllers.CardController.GetCards (Bank.Api) in 293.0421ms
2025-03-03 03:00:36.056 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CardController.GetCards (Bank.Api)'
2025-03-03 03:00:36.061 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Card - - - 200 - application/json;+charset=utf-8 341.5042ms
2025-03-03 03:01:13.778 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Card application/json 170
2025-03-03 03:01:13.781 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:01:13.787 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CardController.CreateCardAsync (Bank.Api)'
2025-03-03 03:01:13.799 +04:00 [INF] Route matched with {action = "CreateCard", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCardAsync(Bank.Model.CardModel) on controller Bank.Api.Controllers.CardController (Bank.Api).
2025-03-03 03:01:14.110 +04:00 [INF] Executed DbCommand (162ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 20), @p4='?' (Size = 100), @p5='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CreditCards] ([AccountId], [Cvc], [ExpirationDate], [Number], [Owner], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-03 03:01:14.132 +04:00 [INF] Executing OkObjectResult, writing value of type 'Bank.DTO.Card'.
2025-03-03 03:01:14.142 +04:00 [INF] Executed action Bank.Api.Controllers.CardController.CreateCardAsync (Bank.Api) in 333.7843ms
2025-03-03 03:01:14.146 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CardController.CreateCardAsync (Bank.Api)'
2025-03-03 03:01:14.149 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Card application/json 170 - 200 - application/json;+charset=utf-8 371.0387ms
2025-03-03 03:01:41.153 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Card application/json 170
2025-03-03 03:01:41.155 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:01:41.156 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.CardController.CreateCardAsync (Bank.Api)'
2025-03-03 03:01:41.159 +04:00 [INF] Route matched with {action = "CreateCard", controller = "Card"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCardAsync(Bank.Model.CardModel) on controller Bank.Api.Controllers.CardController (Bank.Api).
2025-03-03 03:01:41.179 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4), @p2='?' (DbType = Date), @p3='?' (Size = 20), @p4='?' (Size = 100), @p5='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CreditCards] ([AccountId], [Cvc], [ExpirationDate], [Number], [Owner], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-03-03 03:01:41.186 +04:00 [INF] Executing OkObjectResult, writing value of type 'Bank.DTO.Card'.
2025-03-03 03:01:41.190 +04:00 [INF] Executed action Bank.Api.Controllers.CardController.CreateCardAsync (Bank.Api) in 26.7587ms
2025-03-03 03:01:41.192 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.CardController.CreateCardAsync (Bank.Api)'
2025-03-03 03:01:41.194 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Card application/json 170 - 200 - application/json;+charset=utf-8 41.2331ms
2025-03-03 03:01:52.144 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction?id=1 application/json 124
2025-03-03 03:01:52.148 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:01:52.150 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.CreateTransactionAsync (Bank.Api)'
2025-03-03 03:01:52.159 +04:00 [INF] Route matched with {action = "CreateTransaction", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTransactionAsync(Int32, Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:01:52.427 +04:00 [INF] Executed DbCommand (86ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Currency), @p2='?' (DbType = Int32), @p3='?' (Scale = 7) (DbType = DateTime2), @p4='?' (Size = 50), @p5='?' (Size = 50), @p6='?' (DbType = Int32), @p7='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-03-03 03:01:52.479 +04:00 [INF] Executing OkObjectResult, writing value of type 'Bank.DTO.Transaction'.
2025-03-03 03:01:52.507 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.CreateTransactionAsync (Bank.Api) in 343.1761ms
2025-03-03 03:01:52.517 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.CreateTransactionAsync (Bank.Api)'
2025-03-03 03:01:52.524 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction?id=1 application/json 124 - 200 - application/json;+charset=utf-8 379.1816ms
2025-03-03 03:02:09.616 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Transaction - -
2025-03-03 03:02:09.617 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 03:02:09.624 +04:00 [INF] Route matched with {action = "GetTransactions", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Transaction]] GetTransactions() on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:02:09.629 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Transaction, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 03:02:09.696 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountId], [t].[Amount], [t].[CardId], [t].[CreateDate], [t].[Date], [t].[DestinationAccount], [t].[IsDelete], [t].[SourceAccount], [t].[Status], [t].[Type]
FROM [Transactions] AS [t]
2025-03-03 03:02:09.731 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api) in 103.2246ms
2025-03-03 03:02:09.739 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 03:02:09.744 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Transaction - - - 200 - application/json;+charset=utf-8 128.0549ms
2025-03-03 03:02:19.338 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Account - -
2025-03-03 03:02:19.340 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 03:02:19.342 +04:00 [INF] Route matched with {action = "GetAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Account]] GetAccounts() on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 03:02:19.347 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Account, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 03:02:19.445 +04:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
2025-03-03 03:02:19.453 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api) in 107.6786ms
2025-03-03 03:02:19.460 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 03:02:19.465 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Account - - - 200 - application/json;+charset=utf-8 126.6469ms
2025-03-03 03:06:33.988 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124
2025-03-03 03:06:33.990 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:06:33.992 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:06:34.034 +04:00 [INF] Route matched with {action = "Transfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Transfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:06:34.199 +04:00 [INF] Executed DbCommand (70ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:06:34.222 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:06:34.462 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 03:06:35.050 +04:00 [INF] Executed DbCommand (575ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 03:06:35.420 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:342e8fdc-6016-4371-8f88-ad9d4572f73c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:342e8fdc-6016-4371-8f88-ad9d4572f73c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 03:06:35.712 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-03 03:06:35.717 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.Transfer (Bank.Api) in 1673.7677ms
2025-03-03 03:06:35.725 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:06:35.730 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124 - 400 - text/plain;+charset=utf-8 1742.0634ms
2025-03-03 03:06:54.462 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 03:06:54.763 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 03:06:54.811 +04:00 [INF] Hosting environment: Development
2025-03-03 03:06:54.813 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 03:06:55.125 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 03:06:55.609 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 494.7573ms
2025-03-03 03:06:55.797 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 03:06:55.803 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 5.8466ms
2025-03-03 03:06:55.821 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 03:06:55.947 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 126.2168ms
2025-03-03 03:06:56.163 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 03:06:56.441 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 278.6877ms
2025-03-03 03:07:35.000 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124
2025-03-03 03:07:35.011 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:07:35.060 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:07:35.145 +04:00 [INF] Route matched with {action = "Transfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Transfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:07:37.153 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:07:37.156 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:07:37.160 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:07:37.163 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:07:37.168 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:07:37.171 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:07:39.336 +04:00 [INF] Executed DbCommand (233ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:07:39.581 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:07:40.049 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 03:07:40.175 +04:00 [INF] Executed DbCommand (106ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 03:07:40.321 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4e14bc44-3f16-47ad-a8e9-dcfaeb673a88
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4e14bc44-3f16-47ad-a8e9-dcfaeb673a88
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 03:07:40.430 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-03 03:07:40.452 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.Transfer (Bank.Api) in 5287.6369ms
2025-03-03 03:07:40.458 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:07:40.481 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124 - 400 - text/plain;+charset=utf-8 5481.1498ms
2025-03-03 03:07:50.241 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124
2025-03-03 03:07:50.273 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:07:50.282 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:07:50.285 +04:00 [INF] Route matched with {action = "Transfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Transfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:07:50.625 +04:00 [INF] Executed DbCommand (173ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:07:50.639 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:07:50.653 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 03:07:50.691 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 03:07:50.705 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4e14bc44-3f16-47ad-a8e9-dcfaeb673a88
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4e14bc44-3f16-47ad-a8e9-dcfaeb673a88
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 03:07:50.747 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-03 03:07:50.750 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.Transfer (Bank.Api) in 459.9051ms
2025-03-03 03:07:50.754 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:07:50.756 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124 - 400 - text/plain;+charset=utf-8 514.7767ms
2025-03-03 03:08:16.760 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 03:08:17.150 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 03:08:17.154 +04:00 [INF] Hosting environment: Development
2025-03-03 03:08:17.159 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 03:08:17.373 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 03:08:17.691 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 324.0265ms
2025-03-03 03:08:17.760 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 03:08:17.765 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 5.4923ms
2025-03-03 03:08:17.765 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 03:08:17.827 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 61.5341ms
2025-03-03 03:08:18.095 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 03:08:18.466 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 370.1493ms
2025-03-03 03:09:00.907 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124
2025-03-03 03:09:00.917 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:09:00.971 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:09:01.052 +04:00 [INF] Route matched with {action = "Transfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Transfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:09:03.211 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:09:03.215 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:09:03.218 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:09:03.222 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:09:03.225 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:09:03.230 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:09:05.251 +04:00 [INF] Executed DbCommand (265ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:09:05.504 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:09:05.951 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 03:09:06.059 +04:00 [INF] Executed DbCommand (87ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 03:09:06.187 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ed9e905-2a7c-44d5-9dc0-918902fb6906
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3ed9e905-2a7c-44d5-9dc0-918902fb6906
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 03:09:06.270 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-03-03 03:09:06.286 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.Transfer (Bank.Api) in 5219.3412ms
2025-03-03 03:09:06.291 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.Transfer (Bank.Api)'
2025-03-03 03:09:06.307 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/transfer application/json 124 - 400 - text/plain;+charset=utf-8 5400.3698ms
2025-03-03 03:11:58.807 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 03:11:59.128 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 03:11:59.131 +04:00 [INF] Hosting environment: Development
2025-03-03 03:11:59.133 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 03:11:59.343 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 03:11:59.646 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 310.0678ms
2025-03-03 03:11:59.719 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 03:11:59.729 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 10.9933ms
2025-03-03 03:11:59.729 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 03:11:59.797 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.8345ms
2025-03-03 03:11:59.929 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 03:12:00.196 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 266.9982ms
2025-03-03 03:12:30.505 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 124
2025-03-03 03:12:30.515 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:12:30.572 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 03:12:30.649 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:12:32.548 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:12:32.552 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:12:32.556 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:12:32.560 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:12:32.563 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:12:32.567 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 03:12:34.720 +04:00 [INF] Executed DbCommand (324ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:12:35.005 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:12:35.482 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 03:12:35.577 +04:00 [INF] Executed DbCommand (76ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 03:12:35.766 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d54e859e-5d0b-40b0-8454-f898f83a22d9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d54e859e-5d0b-40b0-8454-f898f83a22d9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 03:12:35.897 +04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-03 03:12:35.917 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 5251.2878ms
2025-03-03 03:12:35.924 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 03:12:35.944 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 124 - 500 - text/plain;+charset=utf-8 5439.1333ms
2025-03-03 03:12:49.920 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 124
2025-03-03 03:12:49.923 +04:00 [INF] CORS policy execution successful.
2025-03-03 03:12:49.929 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 03:12:49.931 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 03:12:50.048 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:12:50.056 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 03:12:50.065 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 03:12:50.071 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 03:12:50.080 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d54e859e-5d0b-40b0-8454-f898f83a22d9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d54e859e-5d0b-40b0-8454-f898f83a22d9
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 03:12:50.114 +04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-03 03:12:50.117 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 179.8091ms
2025-03-03 03:12:50.122 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 03:12:50.125 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 124 - 500 - text/plain;+charset=utf-8 204.4519ms
2025-03-03 03:18:31.152 +04:00 [INF] Application is shutting down...
2025-03-03 16:26:20.080 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 16:26:21.634 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 16:26:21.638 +04:00 [INF] Hosting environment: Development
2025-03-03 16:26:21.640 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 16:26:34.500 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 16:26:38.950 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 4149.5880ms
2025-03-03 16:26:39.393 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 16:26:39.397 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 4.2262ms
2025-03-03 16:26:40.047 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 16:26:40.788 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 741.0805ms
2025-03-03 16:26:40.837 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 16:26:42.331 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 1493.7924ms
2025-03-03 16:27:17.511 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 121
2025-03-03 16:27:17.707 +04:00 [INF] CORS policy execution successful.
2025-03-03 16:27:18.229 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 16:27:19.484 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 16:28:53.085 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 16:28:53.090 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 16:28:53.095 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 16:28:53.122 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 16:28:53.129 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 16:28:53.134 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 16:30:24.119 +04:00 [INF] Executed DbCommand (1,947ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 16:30:24.913 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 16:30:25.803 +04:00 [WRN] Savepoints are disabled because Multiple Active Result Sets (MARS) is enabled. If 'SaveChanges' fails, then the transaction cannot be automatically rolled back to a known clean state. Instead, the transaction should be rolled back by the application before retrying 'SaveChanges'. See https://go.microsoft.com/fwlink/?linkid=2149338 for more information and examples. To identify the code which triggers this warning, call 'ConfigureWarnings(w => w.Throw(SqlServerEventId.SavepointsDisabledBecauseOfMARS))'.
2025-03-03 16:30:28.093 +04:00 [INF] Executed DbCommand (2,269ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 16:30:31.652 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:14837978-623f-4f29-973c-bb9363547c0b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:14837978-623f-4f29-973c-bb9363547c0b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 16:30:31.923 +04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-03 16:30:31.971 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 192465.1979ms
2025-03-03 16:30:31.982 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 16:30:32.005 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 121 - 500 - text/plain;+charset=utf-8 194493.6397ms
2025-03-03 17:15:46.895 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 17:15:47.269 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 17:15:47.272 +04:00 [INF] Hosting environment: Development
2025-03-03 17:15:47.273 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 17:15:50.492 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 17:15:50.847 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 362.5541ms
2025-03-03 17:15:52.273 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 17:15:52.277 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 3.9879ms
2025-03-03 17:15:52.320 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 17:15:52.407 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 87.0658ms
2025-03-03 17:15:52.756 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 17:15:53.014 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 257.2776ms
2025-03-03 17:18:07.621 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 17:18:08.567 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 17:18:08.603 +04:00 [INF] Hosting environment: Development
2025-03-03 17:18:08.702 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 17:18:35.805 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 17:18:39.198 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 3413.5418ms
2025-03-03 17:18:39.519 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 17:18:39.532 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 17:18:39.542 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 9.8117ms
2025-03-03 17:18:39.968 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 448.1700ms
2025-03-03 17:18:40.085 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 17:18:41.060 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 975.1783ms
2025-03-03 17:19:39.057 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 121
2025-03-03 17:19:39.080 +04:00 [INF] CORS policy execution successful.
2025-03-03 17:19:39.304 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:19:39.466 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 17:22:14.034 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:22:14.036 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:22:14.038 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:22:14.041 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:22:14.043 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:22:14.045 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:23:01.222 +04:00 [INF] Executed DbCommand (395ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:23:19.396 +04:00 [INF] Executed DbCommand (102ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:28:47.066 +04:00 [INF] Executed DbCommand (4,005ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-03-03 17:29:16.344 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-03 17:29:16.367 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 576880.0128ms
2025-03-03 17:29:16.373 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:29:23.381 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 121 - 200 - text/plain;+charset=utf-8 584323.8818ms
2025-03-03 17:29:46.329 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Transaction - -
2025-03-03 17:29:46.336 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 17:29:46.348 +04:00 [INF] Route matched with {action = "GetTransactions", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Transaction]] GetTransactions() on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 17:30:30.569 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Transaction, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 17:30:30.943 +04:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountId], [t].[Amount], [t].[CardId], [t].[CreateDate], [t].[Date], [t].[DestinationAccount], [t].[IsDelete], [t].[SourceAccount], [t].[Status], [t].[Type]
FROM [Transactions] AS [t]
2025-03-03 17:30:42.542 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api) in 56188.8634ms
2025-03-03 17:30:42.544 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 17:30:42.547 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Transaction - - - 200 - application/json;+charset=utf-8 56218.5064ms
2025-03-03 17:31:27.700 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 17:31:27.991 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 17:31:27.993 +04:00 [INF] Hosting environment: Development
2025-03-03 17:31:27.995 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 17:31:30.727 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 17:31:31.044 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 326.3552ms
2025-03-03 17:31:31.150 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 17:31:31.234 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 17:31:31.320 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 169.0360ms
2025-03-03 17:31:31.445 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 211.2512ms
2025-03-03 17:31:31.565 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 17:31:32.160 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 594.8700ms
2025-03-03 17:31:53.109 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Account - -
2025-03-03 17:31:53.176 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 17:31:53.278 +04:00 [INF] Route matched with {action = "GetAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Account]] GetAccounts() on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 17:31:55.411 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:31:55.414 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:31:55.417 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:31:55.423 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:31:55.428 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:31:55.432 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:31:55.884 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Account, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 17:31:57.774 +04:00 [INF] Executed DbCommand (349ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
2025-03-03 17:31:58.065 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api) in 4773.2097ms
2025-03-03 17:31:58.070 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 17:31:58.083 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Account - - - 200 - application/json;+charset=utf-8 4973.3028ms
2025-03-03 17:33:10.313 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 121
2025-03-03 17:33:10.352 +04:00 [INF] CORS policy execution successful.
2025-03-03 17:33:10.369 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:33:10.402 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 17:33:11.095 +04:00 [INF] Executed DbCommand (181ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:33:11.155 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:33:11.531 +04:00 [INF] Executed DbCommand (33ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-03-03 17:33:11.624 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-03 17:33:11.631 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 1225.6816ms
2025-03-03 17:33:11.636 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:33:11.641 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 121 - 200 - text/plain;+charset=utf-8 1327.9582ms
2025-03-03 17:33:19.464 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Account - -
2025-03-03 17:33:19.489 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 17:33:19.491 +04:00 [INF] Route matched with {action = "GetAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Account]] GetAccounts() on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 17:33:19.528 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Account, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 17:33:19.655 +04:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
2025-03-03 17:33:19.664 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api) in 168.8748ms
2025-03-03 17:33:19.669 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 17:33:19.673 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Account - - - 200 - application/json;+charset=utf-8 208.9187ms
2025-03-03 17:36:10.150 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Transaction - -
2025-03-03 17:36:10.152 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 17:36:10.161 +04:00 [INF] Route matched with {action = "GetTransactions", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Transaction]] GetTransactions() on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 17:36:10.168 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Transaction, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 17:36:10.320 +04:00 [INF] Executed DbCommand (131ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountId], [t].[Amount], [t].[CardId], [t].[CreateDate], [t].[Date], [t].[DestinationAccount], [t].[IsDelete], [t].[SourceAccount], [t].[Status], [t].[Type]
FROM [Transactions] AS [t]
2025-03-03 17:36:10.491 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api) in 326.1827ms
2025-03-03 17:36:10.502 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 17:36:10.514 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Transaction - - - 200 - application/json;+charset=utf-8 364.5398ms
2025-03-03 17:46:33.198 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 17:46:33.454 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 17:46:33.457 +04:00 [INF] Hosting environment: Development
2025-03-03 17:46:33.458 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 17:46:33.611 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 17:46:33.914 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 306.5470ms
2025-03-03 17:46:33.963 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 17:46:33.972 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 17:46:33.977 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 4.3500ms
2025-03-03 17:46:34.026 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 62.9872ms
2025-03-03 17:46:34.445 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 17:46:34.706 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 260.6308ms
2025-03-03 17:52:39.317 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 122
2025-03-03 17:52:39.331 +04:00 [INF] CORS policy execution successful.
2025-03-03 17:52:39.391 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:52:39.468 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 17:52:42.147 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:52:42.150 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:52:42.153 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:52:42.163 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:52:42.169 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:52:42.177 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:52:45.666 +04:00 [INF] Executed DbCommand (406ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:52:45.962 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:52:46.702 +04:00 [INF] Executed DbCommand (178ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 17:52:47.571 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:327e5952-6788-48df-9d77-ea50b97020a8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:327e5952-6788-48df-9d77-ea50b97020a8
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 17:52:47.677 +04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-03 17:52:47.700 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 8211.2864ms
2025-03-03 17:52:47.705 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:52:47.723 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 122 - 500 - text/plain;+charset=utf-8 8406.3045ms
2025-03-03 17:54:03.555 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 17:54:03.897 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 17:54:03.900 +04:00 [INF] Hosting environment: Development
2025-03-03 17:54:03.902 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 17:54:04.204 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 17:54:04.513 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 314.0382ms
2025-03-03 17:54:04.590 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 17:54:04.597 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 7.5782ms
2025-03-03 17:54:04.598 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 17:54:04.671 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.4587ms
2025-03-03 17:54:04.985 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 17:54:05.225 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 239.5250ms
2025-03-03 17:55:07.658 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 122
2025-03-03 17:55:07.673 +04:00 [INF] CORS policy execution successful.
2025-03-03 17:55:07.726 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:55:07.798 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 17:55:09.814 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:55:09.820 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:55:09.824 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:55:09.828 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:55:09.832 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:55:09.837 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 17:55:11.603 +04:00 [INF] Executed DbCommand (102ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:55:11.825 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 17:55:12.347 +04:00 [INF] Executed DbCommand (94ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency), @p4='?' (DbType = Int32), @p5='?' (DbType = Currency), @p6='?' (DbType = Int32), @p7='?' (Scale = 7) (DbType = DateTime2), @p8='?' (Size = 50), @p9='?' (Size = 50), @p10='?' (DbType = Int32), @p11='?' (Size = 10)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [Transactions] ([AccountId], [Amount], [CardId], [Date], [DestinationAccount], [SourceAccount], [Status], [Type])
OUTPUT INSERTED.[Id], INSERTED.[CreateDate], INSERTED.[IsDelete]
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-03-03 17:55:12.483 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Bank.Repository.BankDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6ae41faa-ac79-4ec2-9c79-6d5646398e72
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Transactions_Accounts_AccountId". The conflict occurred in database "TestBase", table "dbo.Accounts", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:6ae41faa-ac79-4ec2-9c79-6d5646398e72
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-03-03 17:55:12.528 +04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-03 17:55:12.543 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 4730.5538ms
2025-03-03 17:55:12.548 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 17:55:12.561 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 122 - 500 - text/plain;+charset=utf-8 4903.5916ms
2025-03-03 18:00:16.531 +04:00 [INF] Now listening on: http://localhost:5000
2025-03-03 18:00:16.786 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - -
2025-03-03 18:00:17.064 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-03-03 18:00:17.067 +04:00 [INF] Hosting environment: Development
2025-03-03 18:00:17.068 +04:00 [INF] Content root path: D:\AllProgramming\Bank\Bank.Api\
2025-03-03 18:00:17.205 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/bankingapi/swagger/index.html - - - 200 - text/html;charset=utf-8 424.8191ms
2025-03-03 18:00:17.282 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_vs/browserLink - -
2025-03-03 18:00:17.283 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - -
2025-03-03 18:00:17.290 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_framework/aspnetcore-browser-refresh.js - - - 200 13752 application/javascript;+charset=utf-8 6.8285ms
2025-03-03 18:00:17.350 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 68.4167ms
2025-03-03 18:00:17.511 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - -
2025-03-03 18:00:17.759 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/swagger/v1/swagger.json/ - - - 200 - application/json;charset=utf-8 248.1208ms
2025-03-03 18:00:52.611 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 122
2025-03-03 18:00:52.623 +04:00 [INF] CORS policy execution successful.
2025-03-03 18:00:52.672 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 18:00:52.744 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 18:00:54.791 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Account' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 18:00:54.794 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Card' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 18:00:54.797 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'City' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 18:00:54.800 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Customer' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 18:00:54.807 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'Transaction' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 18:00:54.811 +04:00 [WRN] The 'bool' property 'IsDelete' on entity type 'User' is configured with a database-generated default. This default will always be used for inserts when the property has the value 'false', since this is the CLR default for the 'bool' type. Consider using the nullable 'bool?' type instead, so that the default will only be used for inserts when the property value is 'null'.
2025-03-03 18:00:56.714 +04:00 [INF] Executed DbCommand (304ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 18:00:56.947 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 18:00:57.254 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Currency), @p3='?' (DbType = Int32), @p2='?' (DbType = Currency)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Accounts] SET [Balance] = @p0
OUTPUT 1
WHERE [Id] = @p1;
UPDATE [Accounts] SET [Balance] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-03-03 18:00:57.328 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-03-03 18:00:57.358 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 4591.085ms
2025-03-03 18:00:57.365 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 18:00:57.405 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 122 - 200 - text/plain;+charset=utf-8 4793.0582ms
2025-03-03 18:01:07.651 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Transaction - -
2025-03-03 18:01:07.658 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 18:01:07.667 +04:00 [INF] Route matched with {action = "GetTransactions", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Transaction]] GetTransactions() on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 18:01:07.791 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Transaction, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 18:01:07.850 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountId], [t].[Amount], [t].[CardId], [t].[CreateDate], [t].[Date], [t].[DestinationAccount], [t].[IsDelete], [t].[SourceAccount], [t].[Status], [t].[Type]
FROM [Transactions] AS [t]
2025-03-03 18:01:07.955 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api) in 277.9771ms
2025-03-03 18:01:07.959 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.GetTransactions (Bank.Api)'
2025-03-03 18:01:07.963 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Transaction - - - 200 - application/json;+charset=utf-8 311.6629ms
2025-03-03 18:01:18.254 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/api/Account - -
2025-03-03 18:01:18.256 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 18:01:18.263 +04:00 [INF] Route matched with {action = "GetAccounts", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Linq.IQueryable`1[Bank.DTO.Account]] GetAccounts() on controller Bank.Api.Controllers.AccountController (Bank.Api).
2025-03-03 18:01:18.327 +04:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1[[Bank.DTO.Account, Bank.DTO, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-03-03 18:01:18.343 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
2025-03-03 18:01:18.355 +04:00 [INF] Executed action Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api) in 85.2105ms
2025-03-03 18:01:18.358 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.AccountController.GetAccounts (Bank.Api)'
2025-03-03 18:01:18.361 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/api/Account - - - 200 - application/json;+charset=utf-8 106.9787ms
2025-03-03 18:05:06.342 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 124
2025-03-03 18:05:06.345 +04:00 [INF] CORS policy execution successful.
2025-03-03 18:05:06.347 +04:00 [INF] Executing endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 18:05:06.350 +04:00 [INF] Route matched with {action = "MakeTransfer", controller = "Transaction"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeTransfer(Bank.Model.TransactionModel) on controller Bank.Api.Controllers.TransactionController (Bank.Api).
2025-03-03 18:05:06.383 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 18:05:06.397 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[Balance], [a].[CreateDate], [a].[CustomerId], [a].[IBAN], [a].[IsDelete], [a].[Status]
FROM [Accounts] AS [a]
WHERE [a].[Id] = @__p_0
2025-03-03 18:05:06.436 +04:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-03-03 18:05:06.439 +04:00 [INF] Executed action Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api) in 79.1619ms
2025-03-03 18:05:06.444 +04:00 [INF] Executed endpoint 'Bank.Api.Controllers.TransactionController.MakeTransfer (Bank.Api)'
2025-03-03 18:05:06.447 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5000/api/Transaction/make-transfer application/json 124 - 500 - text/plain;+charset=utf-8 104.5951ms
2025-03-03 23:10:14.646 +04:00 [INF] Application is shutting down...
